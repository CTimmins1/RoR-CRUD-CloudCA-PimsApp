<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="mb-0"><%= @project.title %></h1>

  <div class="d-flex gap-2">
    <%= link_to "Add Task", new_project_task_path(@project), class: "btn btn-primary" %>
    <%= link_to "Edit Project", edit_project_path(@project), class: "btn btn-secondary" %>
    <%= link_to "Back to Projects", projects_path, class: "btn btn-info" %>
  </div>
</div>

<div class="card mb-4">
  <div class="card-body">
    <h5 class="card-title">Details</h5>
    <p class="card-text"><strong>Description:</strong> <%= @project.description %></p>
    <p class="card-text">
      <strong>Status:</strong> 
      <%= content_tag :span, @project.status.humanize, class: "badge bg-#{['completed', 'done'].include?(@project.status) ? 'success' : @project.status == 'in_progress' ? 'warning' : 'secondary'} fs-6" %>
    </p>
  </div>
</div>

<div class="row mb-5">
  <div class="col-lg-6">
    <div class="card">
      <div class="card-header bg-dark text-white">Task Status Distribution</div>
      <div class="card-body" style="height: 350px;">
        <%= pie_chart @project.task_status_counts, title: "Task Breakdown" %>
      </div>
    </div>
  </div>
</div>

<hr>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Tasks</h2>
  <%= link_to "Add New Task", new_project_task_path(@project), class: "btn btn-success" %>
</div>

<div id="tasks-list">
  <% if @project.tasks.any? %>
    <div class="row">
      <% @project.tasks.each do |task| %>
        <div class="col-md-4 mb-3">
          <%= render "tasks/task", task: task, project: @project %>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="alert alert-light">No tasks defined for this project yet.</p>
  <% end %>
</div>
